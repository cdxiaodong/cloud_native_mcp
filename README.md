

# 云原生安全 MCP

## 概述

**Cloud_Native_MCP**（Model Context Protocol）是一个功能强大、云原生的平台，旨在管理和控制多个云提供商，包括 AWS、Azure、阿里云、华为云、腾讯云和 Google Cloud Platform (GCP)。它采用云原生架构设计，注重安全性与可扩展性，支持与这些云平台的无缝交互，可以实现自动化操作，并在合法授权下通过模拟攻击和利用方法进行安全测试。

**免责声明：** 本工具仅限用于授权的安全测试和教育目的。未经许可用于恶意活动是严格禁止的，并可能违反法律法规。

## 功能

- **多云管理：** 通过单一界面控制和自动化操作 AWS、Azure、阿里云、华为云、腾讯云和 GCP。
- **云原生架构：** 在云环境中高效运行，利用容器化和编排技术实现高可扩展性和可靠性。
- **安全性设计：** 内置强大的安全措施，防止未经授权的访问并确保数据完整性。
- **自动化攻击模拟：** 包含模拟安全漏洞利用的模块，参考 CF 框架中的 AKSK（访问密钥和秘密密钥）利用技术，帮助识别和缓解潜在风险。
- **可扩展性：** 支持通过插件和模块轻松扩展，以适配更多云提供商或自定义功能。

## 支持的云提供商

- 亚马逊云服务 (AWS)
- 微软 Azure
- 阿里巴巴云 (阿里云)
- 华为云
- 腾讯云
- 谷歌云平台 (GCP)

## 安装

要安装云原生安全 MCP，请按照以下步骤操作：

1. **前置条件：**
   - Docker（版本 20.10 或更高）
   - Kubernetes（版本 1.20 或更高）
   - 目标云提供商的访问凭证

2. **克隆仓库：**
   ```bash
   git clone https://github.com/cdxiaodong/cloud-native-secure-mcp.git
   cd cloud-native-secure-mcp
   ```

3. **构建和部署：**
   - 构建 Docker 镜像：
     ```bash
     docker build -t mcp:latest .
     ```
   - 部署到 Kubernetes 集群：
     ```bash
     kubectl apply -f k8s/deployment.yaml
     kubectl apply -f k8s/service.yaml
     ```

4. **配置：**
   - 在 `config.yaml` 文件中配置每个云提供商的访问凭证和 API 端点。

## 快速入门

1. **准备环境：**
   - 确保已安装并配置好 Docker 和 Kubernetes。
   - 对于本地开发，可使用 Minikube 创建 Kubernetes 集群。

2. **部署 MCP：**
   - 按照安装步骤构建和部署。

3. **访问 MCP：**
   - MCP 将在 `http://<您的集群IP>:8080` 上可用。
   - 使用 Web 界面配置云提供商并管理资源。

4. **运行第一个命令：**
   - 使用 CLI 列出 AWS 中的所有 S3 存储桶：
     ```bash
     mcp aws s3 list-buckets
     ```

更多详细文档请参考 [docs](docs/) 目录。

## 使用方法

MCP 可通过 Web 界面或命令行界面 (CLI) 访问。以下是一个使用 CLI 列出 AWS EC2 实例的示例：

```bash
mcp aws ec2 list-instances --region us-west-2
```

若要模拟 AKSK 利用（需确保已获得明确授权）：

```bash
mcp simulate aksk-exploit --provider aws --target-account 123456789012
```

**注意：** 在对云账户进行任何安全测试之前，务必获得明确许可。

## 配置

MCP 使用 YAML 配置文件管理各云提供商的设置。以下是一个配置示例：

```yaml
clouds:
  aws:
    access_key: 您的AWS访问密钥
    secret_key: 您的AWS秘密密钥
    region: us-west-2
  azure:
    tenant_id: 您的Azure租户ID
    client_id: 您的Azure客户端ID
    client_secret: 您的Azure客户端密钥
  # ... 其他云提供商
```

**重要提示：** 请勿将凭证硬编码在配置文件中。建议使用 HashiCorp Vault 或云提供商的密钥管理工具存储敏感信息。

## 安全注意事项

- **最小权限原则：** 为每个云提供商配置 MCP 时，仅授予必要的最小权限。
- **加密保护：** 使用 TLS 加密所有通信，并对静态数据进行加密。
- **审计日志：** 启用日志记录，监控和审计通过 MCP 执行的所有活动。
- **定期更新：** 保持 MCP 及其依赖项的最新状态，以缓解已知漏洞。
- **道德使用：** 仅在获得明确许可的账户和资源上使用攻击模拟功能。

## 攻击模拟功能

MCP 包含模拟多种攻击向量的模块，尤其是针对 AKSK 配置错误的利用，参考了 CF 框架的技术。这些模拟旨在帮助安全专业人员测试和强化其云环境。

**重要提示：** 仅在获得明确授权的环境中使用这些功能进行安全测试。

### 可用的模拟功能

- **AKSK 利用：** 模拟使用泄露的访问密钥进行未经授权的访问。
- **权限提升：** 测试过于宽松的角色和策略。
- **数据泄露：** 模拟从云存储中提取敏感数据的尝试。

每个模拟模块均附带如何安全配置和运行测试的文档。

## 贡献

我们欢迎为云原生安全 MCP 做出贡献。要参与贡献：

1. Fork 本仓库。
2. 为您的功能或错误修复创建一个新分支。
3. 提交 pull request，并清楚描述您的更改。

请遵守仓库中列明的行为准则和贡献指南。

## 许可证

本项目采用 MIT 许可证授权。详情请见 [LICENSE](LICENSE) 文件。

## 免责声明

Cloud_Native_MCP 按“原样”提供，不附带任何形式的担保。作者和贡献者对因本软件的任何误用或损害不承担责任。请负责任且道德地使用本工具。

